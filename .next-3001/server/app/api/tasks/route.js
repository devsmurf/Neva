"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/tasks/route";
exports.ids = ["app/api/tasks/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftasks%2Froute&page=%2Fapi%2Ftasks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftasks%2Froute.ts&appDir=%2FUsers%2Fenessirin%2FDesktop%2FRev%20Code%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fenessirin%2FDesktop%2FRev%20Code&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftasks%2Froute&page=%2Fapi%2Ftasks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftasks%2Froute.ts&appDir=%2FUsers%2Fenessirin%2FDesktop%2FRev%20Code%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fenessirin%2FDesktop%2FRev%20Code&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_enessirin_Desktop_Rev_Code_app_api_tasks_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/tasks/route.ts */ \"(rsc)/./app/api/tasks/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/tasks/route\",\n        pathname: \"/api/tasks\",\n        filename: \"route\",\n        bundlePath: \"app/api/tasks/route\"\n    },\n    resolvedPagePath: \"/Users/enessirin/Desktop/Rev Code/app/api/tasks/route.ts\",\n    nextConfigOutput,\n    userland: _Users_enessirin_Desktop_Rev_Code_app_api_tasks_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/tasks/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0YXNrcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdGFza3MlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ0YXNrcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmVuZXNzaXJpbiUyRkRlc2t0b3AlMkZSZXYlMjBDb2RlJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmVuZXNzaXJpbiUyRkRlc2t0b3AlMkZSZXYlMjBDb2RlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNRO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV2YS15YWxpLz84Nzg0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9lbmVzc2lyaW4vRGVza3RvcC9SZXYgQ29kZS9hcHAvYXBpL3Rhc2tzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS90YXNrcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Rhc2tzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS90YXNrcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9lbmVzc2lyaW4vRGVza3RvcC9SZXYgQ29kZS9hcHAvYXBpL3Rhc2tzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS90YXNrcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftasks%2Froute&page=%2Fapi%2Ftasks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftasks%2Froute.ts&appDir=%2FUsers%2Fenessirin%2FDesktop%2FRev%20Code%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fenessirin%2FDesktop%2FRev%20Code&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/tasks/route.ts":
/*!********************************!*\
  !*** ./app/api/tasks/route.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabaseAdmin */ \"(rsc)/./app/lib/supabaseAdmin.ts\");\n/* harmony import */ var _lib_auth_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth-helpers */ \"(rsc)/./app/lib/auth-helpers.ts\");\n\n\n\nasync function POST(request) {\n    try {\n        // TODO: Re-implement authentication\n        // const user = await getSessionUser()\n        // if (!user) {\n        //   return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\n        // }\n        const body = await request.json();\n        // TODO: Re-implement role-based authorization\n        // Contractors can only create tasks for their own company\n        // if (user.role !== 'admin' && body.company_id !== user.company_id) {\n        //   return NextResponse.json({ error: 'Forbidden' }, { status: 403 })\n        // }\n        // Get project ID (assuming single project for now)\n        const { data: projects } = await _lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"projects\").select(\"id\").limit(1);\n        if (!projects?.[0]) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"No project found\"\n            }, {\n                status: 400\n            });\n        }\n        const { data, error } = await _lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"tasks\").insert({\n            ...body,\n            project_id: projects[0].id,\n            company_id: body.company_id,\n            is_approved: false,\n            created_by: null,\n            updated_by: null\n        }).select(`\n        *,\n        company:companies!tasks_company_id_fkey(*),\n        dependent_company:companies!tasks_dependent_company_id_fkey(*),\n        project:projects(*)\n      `).single();\n        if (error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: error.message\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(data);\n    } catch (error) {\n        console.error(\"Task creation error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(request) {\n    try {\n        const user = await (0,_lib_auth_helpers__WEBPACK_IMPORTED_MODULE_2__.getSessionUser)(request);\n        console.log(\"\\uD83D\\uDCE1 Tasks API - User session:\", user ? `${user.email} (${user.role})` : \"No user\");\n        const { searchParams } = new URL(request.url);\n        const my_tasks = searchParams.get(\"my_tasks\") === \"true\";\n        const approved_only = searchParams.get(\"approved_only\") === \"true\";\n        const newly_approved = searchParams.get(\"newly_approved\") === \"true\";\n        console.log(\"\\uD83D\\uDCE1 Tasks API params:\", {\n            my_tasks,\n            approved_only,\n            newly_approved\n        });\n        let query = _lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"tasks\").select(`\n        *,\n        company:companies!tasks_company_id_fkey(*),\n        dependent_company:companies!tasks_dependent_company_id_fkey(*),\n        project:projects(*)\n      `).order(\"due_date\", {\n            ascending: true\n        });\n        // Role-based filtering\n        if (approved_only) {\n            query = query.eq(\"is_approved\", true);\n        }\n        // Filter by user's tasks if requested\n        if (my_tasks && user && user.company_id) {\n            console.log(\"\\uD83D\\uDCE1 Filtering by company_id:\", user.company_id);\n            query = query.eq(\"company_id\", user.company_id);\n        }\n        const { data, error } = await query;\n        if (error) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: error.message\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(data || []);\n    } catch (error) {\n        console.error(\"Tasks fetch error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RVYsSUFBSSxFQUFFSyxLQUFLLEVBQUUsR0FBRyxNQUFNd0I7UUFFOUIsSUFBSXhCLE9BQU87WUFDVCxPQUFPWixxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO2dCQUFFTSxPQUFPQSxNQUFNVSxPQUFPO1lBQUMsR0FBRztnQkFBRVQsUUFBUTtZQUFJO1FBQ25FO1FBRUEsT0FBT2IscURBQVlBLENBQUNNLElBQUksQ0FBQ0MsUUFBUSxFQUFFO0lBQ3JDLEVBQUUsT0FBT0ssT0FBTztRQUNkVyxRQUFRWCxLQUFLLENBQUMsc0JBQXNCQTtRQUNwQyxPQUFPWixxREFBWUEsQ0FBQ00sSUFBSSxDQUN0QjtZQUFFTSxPQUFPO1FBQXdCLEdBQ2pDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV2YS15YWxpLy4vYXBwL2FwaS90YXNrcy9yb3V0ZS50cz9lNmY4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJ0AvbGliL3N1cGFiYXNlQWRtaW4nXG5pbXBvcnQgeyBnZXRTZXNzaW9uVXNlciB9IGZyb20gJ0AvbGliL2F1dGgtaGVscGVycydcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIFRPRE86IFJlLWltcGxlbWVudCBhdXRoZW50aWNhdGlvblxuICAgIC8vIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRTZXNzaW9uVXNlcigpXG4gICAgLy8gaWYgKCF1c2VyKSB7XG4gICAgLy8gICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICAgIC8vIH1cblxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIFxuICAgIC8vIFRPRE86IFJlLWltcGxlbWVudCByb2xlLWJhc2VkIGF1dGhvcml6YXRpb25cbiAgICAvLyBDb250cmFjdG9ycyBjYW4gb25seSBjcmVhdGUgdGFza3MgZm9yIHRoZWlyIG93biBjb21wYW55XG4gICAgLy8gaWYgKHVzZXIucm9sZSAhPT0gJ2FkbWluJyAmJiBib2R5LmNvbXBhbnlfaWQgIT09IHVzZXIuY29tcGFueV9pZCkge1xuICAgIC8vICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGb3JiaWRkZW4nIH0sIHsgc3RhdHVzOiA0MDMgfSlcbiAgICAvLyB9XG5cbiAgICAvLyBHZXQgcHJvamVjdCBJRCAoYXNzdW1pbmcgc2luZ2xlIHByb2plY3QgZm9yIG5vdylcbiAgICBjb25zdCB7IGRhdGE6IHByb2plY3RzIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgncHJvamVjdHMnKVxuICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgLmxpbWl0KDEpXG5cbiAgICBpZiAoIXByb2plY3RzPy5bMF0pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTm8gcHJvamVjdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCd0YXNrcycpXG4gICAgICAuaW5zZXJ0KHtcbiAgICAgICAgLi4uYm9keSxcbiAgICAgICAgcHJvamVjdF9pZDogcHJvamVjdHNbMF0uaWQsXG4gICAgICAgIGNvbXBhbnlfaWQ6IGJvZHkuY29tcGFueV9pZCwgLy8gVE9ETzogVXNlIHVzZXIuY29tcGFueV9pZCB3aGVuIGF1dGggaXMgaW1wbGVtZW50ZWRcbiAgICAgICAgaXNfYXBwcm92ZWQ6IGZhbHNlLCAvLyBOZXcgdGFza3MgbmVlZCBhcHByb3ZhbFxuICAgICAgICBjcmVhdGVkX2J5OiBudWxsLCAvLyBXaWxsIGJlIHNldCB3aGVuIHdlIGltcGxlbWVudCBwcm9wZXIgdXNlciBwcm9maWxlc1xuICAgICAgICB1cGRhdGVkX2J5OiBudWxsXG4gICAgICB9KVxuICAgICAgLnNlbGVjdChgXG4gICAgICAgICosXG4gICAgICAgIGNvbXBhbnk6Y29tcGFuaWVzIXRhc2tzX2NvbXBhbnlfaWRfZmtleSgqKSxcbiAgICAgICAgZGVwZW5kZW50X2NvbXBhbnk6Y29tcGFuaWVzIXRhc2tzX2RlcGVuZGVudF9jb21wYW55X2lkX2ZrZXkoKiksXG4gICAgICAgIHByb2plY3Q6cHJvamVjdHMoKilcbiAgICAgIGApXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihkYXRhKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1Rhc2sgY3JlYXRpb24gZXJyb3I6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0U2Vzc2lvblVzZXIocmVxdWVzdClcbiAgICBjb25zb2xlLmxvZygn8J+ToSBUYXNrcyBBUEkgLSBVc2VyIHNlc3Npb246JywgdXNlciA/IGAke3VzZXIuZW1haWx9ICgke3VzZXIucm9sZX0pYCA6ICdObyB1c2VyJylcblxuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKVxuICAgIGNvbnN0IG15X3Rhc2tzID0gc2VhcmNoUGFyYW1zLmdldCgnbXlfdGFza3MnKSA9PT0gJ3RydWUnXG4gICAgY29uc3QgYXBwcm92ZWRfb25seSA9IHNlYXJjaFBhcmFtcy5nZXQoJ2FwcHJvdmVkX29ubHknKSA9PT0gJ3RydWUnXG4gICAgY29uc3QgbmV3bHlfYXBwcm92ZWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCduZXdseV9hcHByb3ZlZCcpID09PSAndHJ1ZSdcblxuICAgIGNvbnNvbGUubG9nKCfwn5OhIFRhc2tzIEFQSSBwYXJhbXM6JywgeyBteV90YXNrcywgYXBwcm92ZWRfb25seSwgbmV3bHlfYXBwcm92ZWQgfSlcblxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCd0YXNrcycpXG4gICAgICAuc2VsZWN0KGBcbiAgICAgICAgKixcbiAgICAgICAgY29tcGFueTpjb21wYW5pZXMhdGFza3NfY29tcGFueV9pZF9ma2V5KCopLFxuICAgICAgICBkZXBlbmRlbnRfY29tcGFueTpjb21wYW5pZXMhdGFza3NfZGVwZW5kZW50X2NvbXBhbnlfaWRfZmtleSgqKSxcbiAgICAgICAgcHJvamVjdDpwcm9qZWN0cygqKVxuICAgICAgYClcbiAgICAgIC5vcmRlcignZHVlX2RhdGUnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxuXG4gICAgLy8gUm9sZS1iYXNlZCBmaWx0ZXJpbmdcbiAgICBpZiAoYXBwcm92ZWRfb25seSkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnaXNfYXBwcm92ZWQnLCB0cnVlKVxuICAgIH1cblxuICAgIC8vIEZpbHRlciBieSB1c2VyJ3MgdGFza3MgaWYgcmVxdWVzdGVkXG4gICAgaWYgKG15X3Rhc2tzICYmIHVzZXIgJiYgdXNlci5jb21wYW55X2lkKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+ToSBGaWx0ZXJpbmcgYnkgY29tcGFueV9pZDonLCB1c2VyLmNvbXBhbnlfaWQpXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdjb21wYW55X2lkJywgdXNlci5jb21wYW55X2lkKVxuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oZGF0YSB8fCBbXSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdUYXNrcyBmZXRjaCBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG5cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJzdXBhYmFzZUFkbWluIiwiZ2V0U2Vzc2lvblVzZXIiLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJqc29uIiwiZGF0YSIsInByb2plY3RzIiwiZnJvbSIsInNlbGVjdCIsImxpbWl0IiwiZXJyb3IiLCJzdGF0dXMiLCJpbnNlcnQiLCJwcm9qZWN0X2lkIiwiaWQiLCJjb21wYW55X2lkIiwiaXNfYXBwcm92ZWQiLCJjcmVhdGVkX2J5IiwidXBkYXRlZF9ieSIsInNpbmdsZSIsIm1lc3NhZ2UiLCJjb25zb2xlIiwiR0VUIiwidXNlciIsImxvZyIsImVtYWlsIiwicm9sZSIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsIm15X3Rhc2tzIiwiZ2V0IiwiYXBwcm92ZWRfb25seSIsIm5ld2x5X2FwcHJvdmVkIiwicXVlcnkiLCJvcmRlciIsImFzY2VuZGluZyIsImVxIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/tasks/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/auth-helpers.ts":
/*!*********************************!*\
  !*** ./app/lib/auth-helpers.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearSession: () => (/* binding */ clearSession),\n/* harmony export */   createSession: () => (/* binding */ createSession),\n/* harmony export */   getSessionUser: () => (/* binding */ getSessionUser),\n/* harmony export */   verifyAdminLogin: () => (/* binding */ verifyAdminLogin),\n/* harmony export */   verifyContractorLogin: () => (/* binding */ verifyContractorLogin)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./supabaseAdmin */ \"(rsc)/./app/lib/supabaseAdmin.ts\");\n\n\n/**\n * Get the current session user from Supabase Auth (Server-side for API routes)\n */ async function getSessionUser(request) {\n    try {\n        // For API routes, we need to get cookies from headers\n        let cookieHeader = \"\";\n        if (request) {\n            // API route context - get from request headers\n            cookieHeader = request.headers.get(\"cookie\") || \"\";\n        } else {\n            // Server component context - use cookies() function\n            try {\n                const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n                const allCookies = cookieStore.getAll();\n                cookieHeader = allCookies.map((cookie)=>`${cookie.name}=${cookie.value}`).join(\"; \");\n            } catch (err) {\n                console.warn(\"Could not access cookies store:\", err);\n                return null;\n            }\n        }\n        console.log(\"\\uD83C\\uDF6A Cookie header length:\", cookieHeader.length > 0 ? \"Found\" : \"Empty\");\n        // Create server client with cookies\n        const { createServerClient } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@supabase\"), __webpack_require__.e(\"vendor-chunks/cookie\")]).then(__webpack_require__.bind(__webpack_require__, /*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\"));\n        const supabaseUrl = \"https://wunmkbijqnzsmwfjjymc.supabase.co\";\n        const supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1bm1rYmlqcW56c213ZmpqeW1jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY5MDIxMzUsImV4cCI6MjA3MjQ3ODEzNX0.Urgfq_i02Sw_X9R908QMdDp9sm2jIybn03YQ6qlABSM\";\n        // Parse cookies from header - better handling\n        const parseCookies = (cookieHeader)=>{\n            const cookies = {};\n            if (cookieHeader) {\n                cookieHeader.split(\";\").forEach((cookie)=>{\n                    const equalIndex = cookie.indexOf(\"=\");\n                    if (equalIndex > 0) {\n                        const name = cookie.slice(0, equalIndex).trim();\n                        const value = cookie.slice(equalIndex + 1).trim();\n                        if (name && value) {\n                            try {\n                                cookies[name] = decodeURIComponent(value);\n                            } catch (err) {\n                                // If decoding fails, use raw value\n                                cookies[name] = value;\n                            }\n                        }\n                    }\n                });\n            }\n            return cookies;\n        };\n        const cookiesMap = parseCookies(cookieHeader);\n        console.log(\"\\uD83C\\uDF6A Parsed cookies count:\", Object.keys(cookiesMap).length);\n        // Log Supabase auth cookies specifically\n        const authCookies = Object.keys(cookiesMap).filter((key)=>key.includes(\"supabase\") || key.includes(\"auth\"));\n        console.log(\"\\uD83D\\uDD10 Auth cookies found:\", authCookies.length, authCookies);\n        const supabaseServer = createServerClient(supabaseUrl, supabaseAnonKey, {\n            cookies: {\n                get (name) {\n                    return cookiesMap[name];\n                },\n                set (name, value, options) {\n                    // Can't set cookies in API routes without response object\n                    console.log(\"Setting cookie (server):\", name);\n                },\n                remove (name, options) {\n                    // Can't remove cookies in API routes without response object\n                    console.log(\"Removing cookie (server):\", name);\n                }\n            }\n        });\n        const { data: { user }, error } = await supabaseServer.auth.getUser();\n        if (error || !user) {\n            console.log(\"❌ No authenticated user found (server-side):\", error?.message);\n            return null;\n        }\n        console.log(\"✅ Server-side user found:\", user.email);\n        // Get user profile from database\n        const { data: profile, error: profileError } = await _supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"profiles\").select(`\n        *,\n        company:companies(*)\n      `).eq(\"id\", user.id).single();\n        if (profileError) {\n            console.warn(\"⚠️ Profile not found for user:\", user.id, profileError.message);\n            return {\n                id: user.id,\n                email: user.email || \"\",\n                name: user.email || \"\",\n                company_id: undefined,\n                company_name: undefined,\n                role: \"user\"\n            };\n        }\n        console.log(\"✅ Profile found with role:\", profile.role);\n        return {\n            id: user.id,\n            email: user.email || \"\",\n            name: profile.name || user.email || \"\",\n            company_id: profile.company_id,\n            company_name: profile.company?.name,\n            role: profile.role || \"user\"\n        };\n    } catch (error) {\n        console.error(\"❌ Server-side session user error:\", error);\n        return null;\n    }\n}\n/**\n * Create a session (handled by Supabase Auth automatically)\n */ function createSession(user) {\n    // Supabase Auth handles session creation automatically\n    console.log(\"✅ Session created for user:\", user.email);\n}\n/**\n * Clear the session (use Supabase signOut)\n */ function clearSession() {\n    // Session clearing handled by Supabase Auth\n    console.log(\"\\uD83D\\uDEAA Session cleared\");\n}\n/**\n * Verify contractor credentials using Supabase Auth\n */ async function verifyContractorLogin(email, password) {\n    try {\n        // Use Supabase Auth for login\n        const { data, error } = await _supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.auth.signInWithPassword({\n            email,\n            password\n        });\n        if (error || !data.user) {\n            return {\n                success: false,\n                error: \"Invalid credentials\"\n            };\n        }\n        // Get user profile\n        const { data: profile, error: profileError } = await _supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"profiles\").select(`\n        *,\n        company:companies(*)\n      `).eq(\"id\", data.user.id).single();\n        if (profileError || !profile) {\n            return {\n                success: false,\n                error: \"Profile not found\"\n            };\n        }\n        return {\n            success: true,\n            user: {\n                id: data.user.id,\n                email: data.user.email,\n                name: profile.name,\n                company_id: profile.company_id,\n                company_name: profile.company?.name,\n                role: profile.role\n            }\n        };\n    } catch (error) {\n        console.error(\"Contractor login error:\", error);\n        return {\n            success: false,\n            error: \"Login failed\"\n        };\n    }\n}\n/**\n * Verify admin credentials using Supabase Auth\n */ async function verifyAdminLogin(email, password) {\n    try {\n        // Use Supabase Auth for login\n        const { data, error } = await _supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.auth.signInWithPassword({\n            email,\n            password\n        });\n        if (error || !data.user) {\n            return {\n                success: false,\n                error: \"Invalid credentials\"\n            };\n        }\n        // Get user profile\n        const { data: profile, error: profileError } = await _supabaseAdmin__WEBPACK_IMPORTED_MODULE_1__.supabaseAdmin.from(\"profiles\").select(\"*\").eq(\"id\", data.user.id).single();\n        if (profileError || !profile || profile.role !== \"admin\") {\n            return {\n                success: false,\n                error: \"Access denied\"\n            };\n        }\n        return {\n            success: true,\n            user: {\n                id: data.user.id,\n                email: data.user.email,\n                name: profile.name,\n                role: \"admin\"\n            }\n        };\n    } catch (error) {\n        console.error(\"Admin login error:\", error);\n        return {\n            success: false,\n            error: \"Login failed\"\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YnBhY2s6Ly9uZXZhLXlhbGkvLi9hcHAvbGliL2F1dGgtaGVscGVycy50cz9jODU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnXG5pbXBvcnQgeyBzdXBhYmFzZUFkbWluIH0gZnJvbSAnLi9zdXBhYmFzZUFkbWluJ1xuXG5leHBvcnQgdHlwZSBTZXNzaW9uVXNlciA9IHtcbiAgaWQ6IHN0cmluZ1xuICBlbWFpbD86IHN0cmluZ1xuICBuYW1lPzogc3RyaW5nXG4gIGNvbXBhbnlfaWQ/OiBzdHJpbmdcbiAgY29tcGFueV9uYW1lPzogc3RyaW5nXG4gIHJvbGU6ICd1c2VyJyB8ICdhZG1pbidcbiAgaXNfZmlyc3RfbG9naW4/OiBib29sZWFuXG59XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IHNlc3Npb24gdXNlciBmcm9tIFN1cGFiYXNlIEF1dGggKFNlcnZlci1zaWRlIGZvciBBUEkgcm91dGVzKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2Vzc2lvblVzZXIocmVxdWVzdD86IFJlcXVlc3QpOiBQcm9taXNlPFNlc3Npb25Vc2VyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIC8vIEZvciBBUEkgcm91dGVzLCB3ZSBuZWVkIHRvIGdldCBjb29raWVzIGZyb20gaGVhZGVyc1xuICAgIGxldCBjb29raWVIZWFkZXIgPSAnJ1xuICAgIFxuICAgIGlmIChyZXF1ZXN0KSB7XG4gICAgICAvLyBBUEkgcm91dGUgY29udGV4dCAtIGdldCBmcm9tIHJlcXVlc3QgaGVhZGVyc1xuICAgICAgY29va2llSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnY29va2llJykgfHwgJydcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2VydmVyIGNvbXBvbmVudCBjb250ZXh0IC0gdXNlIGNvb2tpZXMoKSBmdW5jdGlvblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKClcbiAgICAgICAgY29uc3QgYWxsQ29va2llcyA9IGNvb2tpZVN0b3JlLmdldEFsbCgpXG4gICAgICAgIGNvb2tpZUhlYWRlciA9IGFsbENvb2tpZXMubWFwKGNvb2tpZSA9PiBgJHtjb29raWUubmFtZX09JHtjb29raWUudmFsdWV9YCkuam9pbignOyAnKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGFjY2VzcyBjb29raWVzIHN0b3JlOicsIGVycilcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn8J+NqiBDb29raWUgaGVhZGVyIGxlbmd0aDonLCBjb29raWVIZWFkZXIubGVuZ3RoID4gMCA/ICdGb3VuZCcgOiAnRW1wdHknKVxuXG4gICAgLy8gQ3JlYXRlIHNlcnZlciBjbGllbnQgd2l0aCBjb29raWVzXG4gICAgY29uc3QgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSA9IGF3YWl0IGltcG9ydCgnQHN1cGFiYXNlL3NzcicpXG4gICAgY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhXG4gICAgY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhXG4gICAgXG4gICAgLy8gUGFyc2UgY29va2llcyBmcm9tIGhlYWRlciAtIGJldHRlciBoYW5kbGluZ1xuICAgIGNvbnN0IHBhcnNlQ29va2llcyA9IChjb29raWVIZWFkZXI6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgY29va2llczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9XG4gICAgICBpZiAoY29va2llSGVhZGVyKSB7XG4gICAgICAgIGNvb2tpZUhlYWRlci5zcGxpdCgnOycpLmZvckVhY2goY29va2llID0+IHtcbiAgICAgICAgICBjb25zdCBlcXVhbEluZGV4ID0gY29va2llLmluZGV4T2YoJz0nKVxuICAgICAgICAgIGlmIChlcXVhbEluZGV4ID4gMCkge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGNvb2tpZS5zbGljZSgwLCBlcXVhbEluZGV4KS50cmltKClcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY29va2llLnNsaWNlKGVxdWFsSW5kZXggKyAxKS50cmltKClcbiAgICAgICAgICAgIGlmIChuYW1lICYmIHZhbHVlKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29va2llc1tuYW1lXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSlcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgZGVjb2RpbmcgZmFpbHMsIHVzZSByYXcgdmFsdWVcbiAgICAgICAgICAgICAgICBjb29raWVzW25hbWVdID0gdmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb29raWVzXG4gICAgfVxuXG4gICAgY29uc3QgY29va2llc01hcCA9IHBhcnNlQ29va2llcyhjb29raWVIZWFkZXIpXG4gICAgY29uc29sZS5sb2coJ/CfjaogUGFyc2VkIGNvb2tpZXMgY291bnQ6JywgT2JqZWN0LmtleXMoY29va2llc01hcCkubGVuZ3RoKVxuICAgIFxuICAgIC8vIExvZyBTdXBhYmFzZSBhdXRoIGNvb2tpZXMgc3BlY2lmaWNhbGx5XG4gICAgY29uc3QgYXV0aENvb2tpZXMgPSBPYmplY3Qua2V5cyhjb29raWVzTWFwKS5maWx0ZXIoa2V5ID0+IFxuICAgICAga2V5LmluY2x1ZGVzKCdzdXBhYmFzZScpIHx8IGtleS5pbmNsdWRlcygnYXV0aCcpXG4gICAgKVxuICAgIGNvbnNvbGUubG9nKCfwn5SQIEF1dGggY29va2llcyBmb3VuZDonLCBhdXRoQ29va2llcy5sZW5ndGgsIGF1dGhDb29raWVzKVxuICAgIFxuICAgIGNvbnN0IHN1cGFiYXNlU2VydmVyID0gY3JlYXRlU2VydmVyQ2xpZW50KFxuICAgICAgc3VwYWJhc2VVcmwsXG4gICAgICBzdXBhYmFzZUFub25LZXksXG4gICAgICB7XG4gICAgICAgIGNvb2tpZXM6IHtcbiAgICAgICAgICBnZXQobmFtZTogc3RyaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gY29va2llc01hcFtuYW1lXVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0KG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgb3B0aW9uczogYW55KSB7XG4gICAgICAgICAgICAvLyBDYW4ndCBzZXQgY29va2llcyBpbiBBUEkgcm91dGVzIHdpdGhvdXQgcmVzcG9uc2Ugb2JqZWN0XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2V0dGluZyBjb29raWUgKHNlcnZlcik6JywgbmFtZSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlbW92ZShuYW1lOiBzdHJpbmcsIG9wdGlvbnM6IGFueSkge1xuICAgICAgICAgICAgLy8gQ2FuJ3QgcmVtb3ZlIGNvb2tpZXMgaW4gQVBJIHJvdXRlcyB3aXRob3V0IHJlc3BvbnNlIG9iamVjdFxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlbW92aW5nIGNvb2tpZSAoc2VydmVyKTonLCBuYW1lKVxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgKVxuXG4gICAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlU2VydmVyLmF1dGguZ2V0VXNlcigpXG5cbiAgICBpZiAoZXJyb3IgfHwgIXVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinYwgTm8gYXV0aGVudGljYXRlZCB1c2VyIGZvdW5kIChzZXJ2ZXItc2lkZSk6JywgZXJyb3I/Lm1lc3NhZ2UpXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCfinIUgU2VydmVyLXNpZGUgdXNlciBmb3VuZDonLCB1c2VyLmVtYWlsKVxuXG4gICAgLy8gR2V0IHVzZXIgcHJvZmlsZSBmcm9tIGRhdGFiYXNlXG4gICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvcjogcHJvZmlsZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgncHJvZmlsZXMnKVxuICAgICAgLnNlbGVjdChgXG4gICAgICAgICosXG4gICAgICAgIGNvbXBhbnk6Y29tcGFuaWVzKCopXG4gICAgICBgKVxuICAgICAgLmVxKCdpZCcsIHVzZXIuaWQpXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmIChwcm9maWxlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIFByb2ZpbGUgbm90IGZvdW5kIGZvciB1c2VyOicsIHVzZXIuaWQsIHByb2ZpbGVFcnJvci5tZXNzYWdlKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsIHx8ICcnLFxuICAgICAgICBuYW1lOiB1c2VyLmVtYWlsIHx8ICcnLFxuICAgICAgICBjb21wYW55X2lkOiB1bmRlZmluZWQsXG4gICAgICAgIGNvbXBhbnlfbmFtZTogdW5kZWZpbmVkLFxuICAgICAgICByb2xlOiAndXNlcidcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn4pyFIFByb2ZpbGUgZm91bmQgd2l0aCByb2xlOicsIHByb2ZpbGUucm9sZSlcblxuICAgIHJldHVybiB7XG4gICAgICBpZDogdXNlci5pZCxcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsIHx8ICcnLFxuICAgICAgbmFtZTogcHJvZmlsZS5uYW1lIHx8IHVzZXIuZW1haWwgfHwgJycsXG4gICAgICBjb21wYW55X2lkOiBwcm9maWxlLmNvbXBhbnlfaWQsXG4gICAgICBjb21wYW55X25hbWU6IHByb2ZpbGUuY29tcGFueT8ubmFtZSxcbiAgICAgIHJvbGU6IHByb2ZpbGUucm9sZSB8fCAndXNlcidcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIFNlcnZlci1zaWRlIHNlc3Npb24gdXNlciBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgc2Vzc2lvbiAoaGFuZGxlZCBieSBTdXBhYmFzZSBBdXRoIGF1dG9tYXRpY2FsbHkpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXNzaW9uKHVzZXI6IFNlc3Npb25Vc2VyKTogdm9pZCB7XG4gIC8vIFN1cGFiYXNlIEF1dGggaGFuZGxlcyBzZXNzaW9uIGNyZWF0aW9uIGF1dG9tYXRpY2FsbHlcbiAgY29uc29sZS5sb2coJ+KchSBTZXNzaW9uIGNyZWF0ZWQgZm9yIHVzZXI6JywgdXNlci5lbWFpbClcbn1cblxuLyoqXG4gKiBDbGVhciB0aGUgc2Vzc2lvbiAodXNlIFN1cGFiYXNlIHNpZ25PdXQpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclNlc3Npb24oKTogdm9pZCB7XG4gIC8vIFNlc3Npb24gY2xlYXJpbmcgaGFuZGxlZCBieSBTdXBhYmFzZSBBdXRoXG4gIGNvbnNvbGUubG9nKCfwn5qqIFNlc3Npb24gY2xlYXJlZCcpXG59XG5cbi8qKlxuICogVmVyaWZ5IGNvbnRyYWN0b3IgY3JlZGVudGlhbHMgdXNpbmcgU3VwYWJhc2UgQXV0aFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5Q29udHJhY3RvckxvZ2luKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICAvLyBVc2UgU3VwYWJhc2UgQXV0aCBmb3IgbG9naW5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluLmF1dGguc2lnbkluV2l0aFBhc3N3b3JkKHtcbiAgICAgIGVtYWlsLFxuICAgICAgcGFzc3dvcmRcbiAgICB9KVxuXG4gICAgaWYgKGVycm9yIHx8ICFkYXRhLnVzZXIpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ludmFsaWQgY3JlZGVudGlhbHMnIH1cbiAgICB9XG5cbiAgICAvLyBHZXQgdXNlciBwcm9maWxlXG4gICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvcjogcHJvZmlsZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgncHJvZmlsZXMnKVxuICAgICAgLnNlbGVjdChgXG4gICAgICAgICosXG4gICAgICAgIGNvbXBhbnk6Y29tcGFuaWVzKCopXG4gICAgICBgKVxuICAgICAgLmVxKCdpZCcsIGRhdGEudXNlci5pZClcbiAgICAgIC5zaW5nbGUoKVxuXG4gICAgaWYgKHByb2ZpbGVFcnJvciB8fCAhcHJvZmlsZSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnUHJvZmlsZSBub3QgZm91bmQnIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IGRhdGEudXNlci5pZCxcbiAgICAgICAgZW1haWw6IGRhdGEudXNlci5lbWFpbCxcbiAgICAgICAgbmFtZTogcHJvZmlsZS5uYW1lLFxuICAgICAgICBjb21wYW55X2lkOiBwcm9maWxlLmNvbXBhbnlfaWQsXG4gICAgICAgIGNvbXBhbnlfbmFtZTogcHJvZmlsZS5jb21wYW55Py5uYW1lLFxuICAgICAgICByb2xlOiBwcm9maWxlLnJvbGUgYXMgJ3VzZXInIHwgJ2FkbWluJ1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDb250cmFjdG9yIGxvZ2luIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0xvZ2luIGZhaWxlZCcgfVxuICB9XG59XG5cbi8qKlxuICogVmVyaWZ5IGFkbWluIGNyZWRlbnRpYWxzIHVzaW5nIFN1cGFiYXNlIEF1dGhcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeUFkbWluTG9naW4oZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIC8vIFVzZSBTdXBhYmFzZSBBdXRoIGZvciBsb2dpblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW4uYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQoe1xuICAgICAgZW1haWwsXG4gICAgICBwYXNzd29yZFxuICAgIH0pXG5cbiAgICBpZiAoZXJyb3IgfHwgIWRhdGEudXNlcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52YWxpZCBjcmVkZW50aWFscycgfVxuICAgIH1cblxuICAgIC8vIEdldCB1c2VyIHByb2ZpbGVcbiAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yOiBwcm9maWxlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdwcm9maWxlcycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnaWQnLCBkYXRhLnVzZXIuaWQpXG4gICAgICAuc2luZ2xlKClcblxuICAgIGlmIChwcm9maWxlRXJyb3IgfHwgIXByb2ZpbGUgfHwgcHJvZmlsZS5yb2xlICE9PSAnYWRtaW4nKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBY2Nlc3MgZGVuaWVkJyB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiBkYXRhLnVzZXIuaWQsXG4gICAgICAgIGVtYWlsOiBkYXRhLnVzZXIuZW1haWwsXG4gICAgICAgIG5hbWU6IHByb2ZpbGUubmFtZSxcbiAgICAgICAgcm9sZTogJ2FkbWluJyBhcyBjb25zdFxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBZG1pbiBsb2dpbiBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdMb2dpbiBmYWlsZWQnIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvb2tpZXMiLCJzdXBhYmFzZUFkbWluIiwiZ2V0U2Vzc2lvblVzZXIiLCJyZXF1ZXN0IiwiY29va2llSGVhZGVyIiwiaGVhZGVycyIsImdldCIsImNvb2tpZVN0b3JlIiwiYWxsQ29va2llcyIsImdldEFsbCIsIm1hcCIsImNvb2tpZSIsIm5hbWUiLCJ2YWx1ZSIsImpvaW4iLCJlcnIiLCJjb25zb2xlIiwid2FybiIsImxvZyIsImxlbmd0aCIsImNyZWF0ZVNlcnZlckNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwicGFyc2VDb29raWVzIiwic3BsaXQiLCJmb3JFYWNoIiwiZXF1YWxJbmRleCIsImluZGV4T2YiLCJzbGljZSIsInRyaW0iLCJkZWNvZGVVUklDb21wb25lbnQiLCJjb29raWVzTWFwIiwiT2JqZWN0Iiwia2V5cyIsImF1dGhDb29raWVzIiwiZmlsdGVyIiwia2V5IiwiaW5jbHVkZXMiLCJzdXBhYmFzZVNlcnZlciIsInNldCIsIm9wdGlvbnMiLCJyZW1vdmUiLCJkYXRhIiwidXNlciIsImVycm9yIiwiYXV0aCIsImdldFVzZXIiLCJtZXNzYWdlIiwiZW1haWwiLCJwcm9maWxlIiwicHJvZmlsZUVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwiaWQiLCJzaW5nbGUiLCJjb21wYW55X2lkIiwidW5kZWZpbmVkIiwiY29tcGFueV9uYW1lIiwicm9sZSIsImNvbXBhbnkiLCJjcmVhdGVTZXNzaW9uIiwiY2xlYXJTZXNzaW9uIiwidmVyaWZ5Q29udHJhY3RvckxvZ2luIiwicGFzc3dvcmQiLCJzaWduSW5XaXRoUGFzc3dvcmQiLCJzdWNjZXNzIiwidmVyaWZ5QWRtaW5Mb2dpbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/auth-helpers.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/supabaseAdmin.ts":
/*!**********************************!*\
  !*** ./app/lib/supabaseAdmin.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://wunmkbijqnzsmwfjjymc.supabase.co\" || 0;\nconst supabaseServiceRole = process.env.SUPABASE_SERVICE_ROLE || \"\";\n// Server-only admin client\nlet _supabaseAdmin = null;\nfunction createSupabaseAdminClient() {\n    if (_supabaseAdmin) return _supabaseAdmin;\n    if (!supabaseUrl || !supabaseServiceRole) {\n        throw new Error(\"Supabase admin configuration missing. Check NEXT_PUBLIC_SUPABASE_URL and SUPABASE_SERVICE_ROLE environment variables.\");\n    }\n    _supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceRole, {\n        auth: {\n            autoRefreshToken: false,\n            persistSession: false\n        }\n    });\n    return _supabaseAdmin;\n}\n// Only export admin client on server-side\nconst supabaseAdmin = createSupabaseAdminClient();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvbGliL3N1cGFiYXNlQWRtaW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0Q7QUFFcEQsTUFBTUMsY0FBY0MsMENBQW9DLElBQUk7QUFDNUQsTUFBTUcsc0JBQXNCSCxRQUFRQyxHQUFHLENBQUNHLHFCQUFxQixJQUFJO0FBRWpFLDJCQUEyQjtBQUMzQixJQUFJQyxpQkFBc0I7QUFFMUIsU0FBU0M7SUFDUCxJQUFJRCxnQkFBZ0IsT0FBT0E7SUFFM0IsSUFBSSxDQUFDTixlQUFlLENBQUNJLHFCQUFxQjtRQUN4QyxNQUFNLElBQUlJLE1BQU07SUFDbEI7SUFFQUYsaUJBQWlCUCxtRUFBWUEsQ0FBQ0MsYUFBYUkscUJBQXFCO1FBQzlESyxNQUFNO1lBQ0pDLGtCQUFrQjtZQUNsQkMsZ0JBQWdCO1FBQ2xCO0lBQ0Y7SUFFQSxPQUFPTDtBQUNUO0FBRUEsMENBQTBDO0FBQ25DLE1BQU1NLGdCQUFnQkwsNEJBQTJCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV2YS15YWxpLy4vYXBwL2xpYi9zdXBhYmFzZUFkbWluLnRzP2NlMjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCB8fCAnJ1xuY29uc3Qgc3VwYWJhc2VTZXJ2aWNlUm9sZSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRSB8fCAnJ1xuXG4vLyBTZXJ2ZXItb25seSBhZG1pbiBjbGllbnRcbmxldCBfc3VwYWJhc2VBZG1pbjogYW55ID0gbnVsbFxuXG5mdW5jdGlvbiBjcmVhdGVTdXBhYmFzZUFkbWluQ2xpZW50KCkge1xuICBpZiAoX3N1cGFiYXNlQWRtaW4pIHJldHVybiBfc3VwYWJhc2VBZG1pblxuICBcbiAgaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VTZXJ2aWNlUm9sZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgYWRtaW4gY29uZmlndXJhdGlvbiBtaXNzaW5nLiBDaGVjayBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgYW5kIFNVUEFCQVNFX1NFUlZJQ0VfUk9MRSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJylcbiAgfVxuICBcbiAgX3N1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlU2VydmljZVJvbGUsIHtcbiAgICBhdXRoOiB7XG4gICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZVxuICAgIH1cbiAgfSlcbiAgXG4gIHJldHVybiBfc3VwYWJhc2VBZG1pblxufVxuXG4vLyBPbmx5IGV4cG9ydCBhZG1pbiBjbGllbnQgb24gc2VydmVyLXNpZGVcbmV4cG9ydCBjb25zdCBzdXBhYmFzZUFkbWluID0gY3JlYXRlU3VwYWJhc2VBZG1pbkNsaWVudCgpXG5cblxuXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlUm9sZSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRSIsIl9zdXBhYmFzZUFkbWluIiwiY3JlYXRlU3VwYWJhc2VBZG1pbkNsaWVudCIsIkVycm9yIiwiYXV0aCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiIsInN1cGFiYXNlQWRtaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/supabaseAdmin.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftasks%2Froute&page=%2Fapi%2Ftasks%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftasks%2Froute.ts&appDir=%2FUsers%2Fenessirin%2FDesktop%2FRev%20Code%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fenessirin%2FDesktop%2FRev%20Code&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();